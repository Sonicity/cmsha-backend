sudo: required
language: java
jdk:
- oraclejdk8
notifications:
  slack:
    secure: WA2Z6i7vFRS6+Ogj6CgrXeqeCBXOQ7aMG+fJD/7XCcUvr9ZBfSEdz+GLEdqnb8KFHNfzHkzgpYLqfyxrvUi/YGC5HUGN3W5LBGMRQ2Y7aEdzDwOonnnuGmMIZCnoDHr+tOzDAuOf8bAummQL/Cg155QsbMXYdectKmAzrGVspVCdIQKZKbqasNI3KBzE2PpHK9mMqV/7jAK6Q9FX1B5nFHc3ahPLjweQIPYz5Hai9iJJDCqhF9I3k1r60Gymn7TNHPHSuHEqqQ/S9RR1cV2N9O9A3fPBqwyqn1CkWrBGH3gJ4I+tYov5dI30ceuA0g3ERVejCOBFiWOsjAUs2Hys9JsAPNVQ74Xo7SMKFleWgPAK646VMv2WmSCFQKCihNP63CwOxYnD/1tvSpKXiKgJjnSnYp2VrT1eTJcGTpRyB4EqNGGLHP1Ra//7A76FUJkaSZwdSWaouJ6bNHRR0naZuXoFJXKhTl0ADJuTKaq76TKswGasMYpyR7PZZRAd2HQWGv6wixjAtJDTNFMrwCtoGLfqQVmpaE1OTM9ibY8ghiQiYD27bsJOh5WnMwT7/KuOG9ik8k2zDHS7ln0HS4OVXJ2sdacP9/Lh+nNduiPLW+LbeAzo26QJG8AmXpAjw9wR5qXfm+DbfFle+ZoJHsUjE2lXx/fAKokt4pGapdt3Uus=
after_success:
- docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
- mvn -P docker -DskipTests package
- docker push hugot/cmsha-backend:latest
services:
- docker
env:
  global:
  - secure: bfSLMCMdZPjGfEjO6Qd+WVSUPjvE27ZL04R3kQMzHXV2rJa34AH2T2AdAyuyAcLEh6xLDUB2+bq9Xh1BmMmhqTUZFnlWTR/blvnf61gDPtih99ndQi/s5y3uSF/ayNJ9qOxA2QnZWhoZezkFqzIu+sLAGZxdtXuRtDzTwv2jbeVTWumlyygHT0+xZlVT9sCkwem/D5qXeLgsV9m0NZSHU1RJPzUTudly/jDTejUksUZyMHIDCDHGfJvAXXyA4CdTrJyjlqDGT+h4tKqymowxGVt1mmkJOq+52mgxOqAC4kNWS/JIODKl3a4S3BPE2baDHZqclODuuvk7ErFzuS83tiGTSHOxYk6Q9jWAksSwQwomqvrSrMUFcn6IV3D40+Jtb5AIGDurf7OKk0Mu24TnKzXTaJKGSHN//VN4jDUN/aIxR4Ppy+aZS4NZlw6b+7ZaQwjadHUPCijJCdjEpl+L66bYS3lxyzliJsUzWqYeI4TeBPB7gg76gzDxzydQZcwOc+MO4GFAg5R4nMP8f3KzRUjCSqxevpQqVyu9wifhgy7LSntehKcbirC49DhmiD/akXucyYc0jjLYj/i52FnH45obf4Z6CaGSkjyMrqoOcUCKNafoWoxAlu1DR7QY/S2b1HZ1l1KKFJlefhN9gMp7rfvTme2cOXjz9tuZvuOxmj8=
  - secure: exwia9Mx+NnE7LqpN0Nyn94OgbCoxOHpLIaWAczsQ9HFn4KWvXL0l5sTsIn8sKaH4ln0Sg7ZWpQ9VgZoatFy06SJJKYqweaNpf+CxIQ2jzsAs7XZYY8inq8kemd/TffBNyysv3hpB7w6SK0N9X+4tDG4nK9ujXbN40RkWPxTLHnhqms6OGDlIVatFoihHphfBvLLkhmnCJy1g+py6LUmZJ7zjHU1tF3pgQ7IesrDV4uGykL3tTHvIk8GWYkirFQFeX2OruJEEeF0tfymJEdI61IQ+LoTbd9PFGKL4MTNY33FZEaDJMwWQLLp8nW/5km6nAmfPih3jlVxhWzixcmHBZ0rx9nLMthJ9XURqGwZ8+vhFBMIp62Amri+mbrjm6jCXoIX8+q3+Lfr5UGGNNzjLhhezKfCWYBcAawi/OzL1kESk9914BojLnHL2aOUXc1XuLB2sbyri6tMHbsN5mn0Oh+5X//R2zuJHGjAR5vJya1C9hDRURzt7zodmgWPFCoWJLKzYmDJ4NxM16HhXX65hGCKnHM88gSD1Oc155e7OLXLHz3IM54dkzMAPZPWlwasFJfIMxnUotAv68r5W8jImqki+uQA8Xv0yKFzVE04qUsXw/4XnUZsVdgT8ymK8fspofykKkKqHJ710Gx1JlSgdTmGS/cF013VUy86A3uSqm0=
addons:
  sonarcloud:
    organization: "sonicity-github"
    token:
      secure: "hjMLwyiCJEqij758aFv8RNAh4p/ubDubnPUqlG5pfgSktOMXn8OsYxk1M+wlzLsH0PQDFli+xE8McS3VkGuEdS17UnmbJmmMvR0+t3K+RIz93iC/Q721SrHVIfsKM9jOW83jBXk/IeOYfvAZFfj1lAV3hq5273LXMFpqlgHUQ/euW5oDkmTPnxz+VTgnCgWdhh6zfabPfdbpJcksXYg370YmN/uAlREz9VLNWngwOh54Vteshw3D7IhN/JPulokzlZSOxNrJ0GiQbMBJVi84WyMbHQbT7NofktbZW9p0Dj6EgWncz7ICMJobXD7mtrIZOUm4GaRkR5k8kT64YLo206vXNxlNdJTdCKLvlEMiJyZU6RKdJm/wPppq3oWr9tnuvx1utAnf2w0JUBsG901sP3cJgvOaQim6yArzFkkznFLt+o38nKr3ZcKHEgFxGfe5dWrK9O7fSdmgPbfmBAZH0Y1qCGqE/a4D+fhq3V332lXMsdKdRA325P7Qrsgnb6YzgTxuW8sVwrwFvxb2X8koFuVHg4lv9ImFbUYoEqImOdUI7i9BAGMNLGSHHmYpUjleEYgiJriPr548u2MKNhuJuTZKTdFKJ1eZIJlk7KEvIvhUhcEzADqWpZhkRcADmmhG80yYOf7hWr/Z9Jg8mIuQRtkUoNd03VQdLshGvZglaqY="
script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar      